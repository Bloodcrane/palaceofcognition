{"version":3,"file":"static/js/316.871b81cb.chunk.js","mappings":"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","sources":["Pages/UserPage.jsx"],"sourcesContent":["import React, { useState, useEffect } from 'react';\nimport { account, databases } from '../appwrite';\nimport { Query } from 'appwrite';\nimport './UserPage.css';\nimport articles from '../Articles.json';\nimport { motion, AnimatePresence } from 'framer-motion';\n\nconst VOTES_DATABASE_ID = '697e6e0200022dd882b7';\nconst VOTES_COLLECTION_ID = 'user_votes';\n\nconst UserPage = () => {\n  const [user, setUser] = useState(null);\n  const [votedArticles, setVotedArticles] = useState([]);\n  const [isLoading, setIsLoading] = useState(true);\n\n  useEffect(() => {\n    const fetchData = async () => {\n      try {\n        const currentUser = await account.get();\n        setUser(currentUser);\n\n        // Fetch user votes\n        const votesResponse = await databases.listDocuments(\n          VOTES_DATABASE_ID,\n          VOTES_COLLECTION_ID,\n          [\n            Query.equal('user_id', currentUser.$id),\n            Query.orderDesc('$createdAt')\n          ]\n        );\n\n        // Map votes to articles\n        const mappedArticles = votesResponse.documents.map(vote => {\n          // Find the article that matches the vote's post_id\n          const article = articles.find(a => a.id.toString() === vote.post_id);\n          if (article) {\n            return {\n              ...article,\n              voteId: vote.$id,\n              voteType: vote.vote_type,\n              votedAt: vote.$createdAt\n            };\n          }\n          return null;\n        }).filter(item => item !== null);\n\n        setVotedArticles(mappedArticles);\n      } catch (error) {\n        console.error(\"Error fetching data:\", error);\n        // Handle not logged in or other errors\n        if (!user) window.location.href = '/login';\n      } finally {\n        setIsLoading(false);\n      }\n    };\n\n    fetchData();\n  }, []);\n\n  const handleRemoveVote = async (voteId) => {\n    try {\n      await databases.deleteDocument(VOTES_DATABASE_ID, VOTES_COLLECTION_ID, voteId);\n      setVotedArticles(prev => prev.filter(article => article.voteId !== voteId));\n    } catch (error) {\n      console.error(\"Error removing vote:\", error);\n      alert(\"Failed to remove vote. Please try again.\");\n    }\n  };\n\n  return (\n    <div>\n      <div className=\"userPage\">\n        {user ? (\n          <>\n            <div className=\"profileContainer\">\n              <div className=\"profileIcon\"></div>\n              <h2>{user.email}</h2>\n              <p>áƒ—áƒ¥áƒ•áƒ”áƒœáƒ˜ áƒáƒ áƒáƒ¤áƒ˜áƒšáƒ˜áƒ¡ áƒ’áƒ•áƒ”áƒ áƒ“áƒ˜</p>\n            </div>\n\n            <div style={{ marginTop: '50px', width: '90%', maxWidth: '1200px' }}>\n              <h3 style={{ textAlign: 'left', marginLeft: '20px', borderBottom: '1px solid #ffffff33', paddingBottom: '10px' }}>\n                áƒ®áƒ›áƒ˜áƒ¡ áƒ›áƒ˜áƒªáƒ”áƒ›áƒ˜áƒ¡ áƒ˜áƒ¡áƒ¢áƒáƒ áƒ˜áƒ\n              </h3>\n\n              {votedArticles.length === 0 ? (\n                <p style={{ opacity: 0.6, marginTop: '20px' }}>áƒ—áƒ¥áƒ•áƒ”áƒœ áƒ¯áƒ”áƒ  áƒáƒ  áƒ›áƒ˜áƒ’áƒ˜áƒªáƒ˜áƒáƒ— áƒ®áƒ›áƒ áƒáƒ áƒªáƒ”áƒ áƒ—áƒ˜ áƒ¡áƒ¢áƒáƒ¢áƒ˜áƒ˜áƒ¡áƒ—áƒ•áƒ˜áƒ¡.</p>\n              ) : (\n                <motion.div layout className=\"votes-grid\">\n                  <AnimatePresence>\n                    {votedArticles.map((article) => (\n                      <motion.div\n                        layout\n                        initial={{ opacity: 0, scale: 0.9 }}\n                        animate={{ opacity: 1, scale: 1 }}\n                        exit={{ opacity: 0, scale: 0.9 }}\n                        key={article.voteId}\n                        className=\"vote-card\"\n                      >\n                        <div className=\"vote-card-image\" style={{ backgroundImage: `url(${article.imageUrl})` }}>\n                          <div className=\"vote-badge\" style={{ backgroundColor: article.voteType === 1 ? '#5b744d' : '#3d2929' }}>\n                            {article.voteType === 1 ? 'ğŸ’š áƒ›áƒáƒ¬áƒáƒœáƒ”áƒ‘áƒ£áƒšáƒ˜' : 'ğŸ’” áƒ“áƒáƒ¬áƒ£áƒœáƒ”áƒ‘áƒ£áƒšáƒ˜'}\n                          </div>\n                        </div>\n                        <div className=\"vote-card-content\">\n                          <h4>{article.title}</h4>\n                          <button onClick={() => handleRemoveVote(article.voteId)} className=\"remove-vote-btn\">\n                            áƒ˜áƒ¡áƒ¢áƒáƒ áƒ˜áƒ˜áƒ“áƒáƒœ áƒ¬áƒáƒ¨áƒšáƒ\n                          </button>\n                        </div>\n                      </motion.div>\n                    ))}\n                  </AnimatePresence>\n                </motion.div>\n              )}\n            </div>\n          </>\n        ) : (\n          <p>áƒ˜áƒ¢áƒ•áƒ˜áƒ áƒ—áƒ”áƒ‘áƒ...</p>\n        )}\n      </div>\n    </div>\n  );\n};\n\nexport default UserPage;\n\n"],"names":["VOTES_DATABASE_ID","VOTES_COLLECTION_ID","UserPage","user","setUser","useState","votedArticles","setVotedArticles","isLoading","setIsLoading","useEffect","async","currentUser","account","get","mappedArticles","databases","listDocuments","Query","equal","$id","orderDesc","documents","map","vote","article","articles","find","a","id","toString","post_id","voteId","voteType","vote_type","votedAt","$createdAt","filter","item","error","console","window","location","href","fetchData","_jsx","children","className","_jsxs","_Fragment","email","style","marginTop","width","maxWidth","textAlign","marginLeft","borderBottom","paddingBottom","length","opacity","motion","div","layout","AnimatePresence","initial","scale","animate","exit","backgroundImage","concat","imageUrl","backgroundColor","title","onClick","deleteDocument","prev","alert","handleRemoveVote"],"sourceRoot":""}