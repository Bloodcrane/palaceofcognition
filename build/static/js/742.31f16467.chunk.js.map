{"version":3,"file":"static/js/742.31f16467.chunk.js","mappings":"oNAOA,MA6IA,EA1I0BA,KACxB,MAAQC,MAAOC,IAAcC,EAAAA,EAAAA,MAEtBC,EAASC,IAAcC,EAAAA,EAAAA,UAAS,OAChCC,EAAUC,IAAeF,EAAAA,EAAAA,UAAS,KAClCG,EAAWC,IAAgBJ,EAAAA,EAAAA,WAAS,IACpCK,EAAOC,IAAYN,EAAAA,EAAAA,UAAS,MAC7BO,GAAoBC,EAAAA,EAAAA,IAAc,CAAEC,MAAO,yBAEjDC,EAAAA,EAAAA,YAAU,KACYC,WAClBP,GAAa,GACbE,EAAS,MAET,IAEE,MAAMM,EAAgBC,EAASC,MAAMC,GAAMA,EAAEC,GAAGC,aAAerB,IAE/D,GAAIgB,GAGF,GAFAb,EAAWa,GAEPA,EAAcX,SAAU,CAC1B,MAAMiB,QAAiBC,MAAMP,EAAcX,UAC3C,IAAKiB,EAASE,GAAI,MAAM,IAAIC,MAAM,+BAClC,MAAMC,QAAaJ,EAASI,OAC5BpB,EAAYoB,EACd,MACK,CAEL,MAAMC,QAAuBC,EAAAA,GAAUC,YAhCvB,uBACK,WAkCnB7B,GAGE2B,IACFxB,EAAW,CACTJ,MAAO4B,EAAe5B,MACtB+B,OAAQH,EAAeG,OACvBC,SAAUJ,EAAeI,SACzBC,YAAaL,EAAeK,cAG9B1B,EAAYqB,EAAetB,UAE/B,CACF,CAAE,MAAO4B,GACPC,QAAQzB,MAAM,yBAA0BwB,GACxCvB,EAAS,yKACX,CAAC,QACCF,GAAa,EACf,GAGF2B,EAAa,GACZ,CAACnC,IAiBJ,OAAIO,GACK6B,EAAAA,EAAAA,KAAA,OAAKC,UAAU,oBAAmBC,SAAC,8DAGxC7B,IAAUP,GACLkC,EAAAA,EAAAA,KAAA,OAAKC,UAAU,kBAAiBC,SAAE7B,GAAS,8GAIlD8B,EAAAA,EAAAA,MAAA,OAAAD,SAAA,CAvBIpC,GAEAqC,EAAAA,EAAAA,MAACC,EAAAA,EAAM,CAAAF,SAAA,EACLF,EAAAA,EAAAA,KAAA,SAAAE,SAAQpC,EAAQH,SAChBqC,EAAAA,EAAAA,KAAA,QAAMK,KAAK,cAAcC,QAASxC,EAAQ8B,aAAe,6BACzDI,EAAAA,EAAAA,KAAA,QAAMO,SAAS,WAAWD,QAASxC,EAAQH,SAC3CqC,EAAAA,EAAAA,KAAA,QAAMO,SAAS,iBAAiBD,QAASxC,EAAQ8B,aAAe,6BAChEI,EAAAA,EAAAA,KAAA,QAAMO,SAAS,WAAWD,QAASxC,EAAQ6B,cAI1C,MAcLK,EAAAA,EAAAA,KAAA,OAAAE,UACEF,EAAAA,EAAAA,KAAA,OACEC,UAAU,oBACVO,MAAO,CACLC,QAAS,OACTC,eAAgB,QAChBC,mBAAoB,SACpBC,MAAO,OACPC,OAAQ,QACRX,UAEFC,EAAAA,EAAAA,MAAA,OACEK,MAAO,CACLM,eAAgB,aAChBC,UAAW,OACXC,WAAY,oBACZC,gBAAiB,oCACjBC,UAAW,SACXN,MAAO,QACPV,SAAA,EAEFF,EAAAA,EAAAA,KAAA,MAAAE,SAAKpC,EAAQH,SACbwC,EAAAA,EAAAA,MAAA,KAAAD,SAAA,CAAG,yCAASpC,EAAQ4B,WACpBM,EAAAA,EAAAA,KAAA,OACEmB,IAAKrD,EAAQ6B,SACbyB,IAAI,GACJZ,MAAO,CACLI,MAAO,OACPC,OAAQtC,EAAoB,QAAU,QACtC8C,aAAc,OACdC,UAAW,+BACXC,SAAU,UAGdvB,EAAAA,EAAAA,KAAA,OACEC,UAAU,WACVO,MAAO,CACLe,SAAUhD,EAAoB,QAAU,MACxCiD,OAAQ,YACRC,SAAUlD,EAAoB,OAAS,OACvCmD,WAAY,MACZR,UAAW,OACXS,QAAS,SACTC,WAAY,YACZ1B,SAEDjC,aAKL,C","sources":["Pages/SingleArticlePage.jsx"],"sourcesContent":["import React, { useState, useEffect } from 'react';\nimport { useParams } from 'react-router-dom';\nimport articles from '../Articles.json';\nimport { useMediaQuery } from 'react-responsive';\nimport { Helmet } from 'react-helmet';\nimport { databases } from '../appwrite';\n\nconst VOTES_DATABASE_ID = '697e6e0200022dd882b7';\nconst ARTICLES_COLLECTION_ID = 'articles';\n\nconst SingleArticlePage = () => {\n  const { title: articleId } = useParams();\n\n  const [article, setArticle] = useState(null);\n  const [fullText, setFullText] = useState('');\n  const [isLoading, setIsLoading] = useState(true);\n  const [error, setError] = useState(null);\n  const isDesktopOrLaptop = useMediaQuery({ query: '(min-width: 1224px)' });\n\n  useEffect(() => {\n    const loadArticle = async () => {\n      setIsLoading(true);\n      setError(null);\n\n      try {\n        // 1. Try finding in local JSON\n        const staticArticle = articles.find((a) => a.id.toString() === articleId);\n\n        if (staticArticle) {\n          setArticle(staticArticle);\n          // Fetch full text for static article (it's usually a URL/path)\n          if (staticArticle.fullText) {\n            const response = await fetch(staticArticle.fullText);\n            if (!response.ok) throw new Error(\"Failed to fetch static text\");\n            const text = await response.text();\n            setFullText(text);\n          }\n        } else {\n          // 2. Try fetching from Appwrite\n          const dynamicArticle = await databases.getDocument(\n            VOTES_DATABASE_ID,\n            ARTICLES_COLLECTION_ID,\n            articleId\n          );\n\n          if (dynamicArticle) {\n            setArticle({\n              title: dynamicArticle.title,\n              author: dynamicArticle.author,\n              imageUrl: dynamicArticle.imageUrl,\n              description: dynamicArticle.description\n            });\n            // For dynamic articles, fullText is stored directly in the DB\n            setFullText(dynamicArticle.fullText);\n          }\n        }\n      } catch (err) {\n        console.error(\"Error loading article:\", err);\n        setError(\"სტატიის ჩატვირთვა ვერ მოხერხდა.\");\n      } finally {\n        setIsLoading(false);\n      }\n    };\n\n    loadArticle();\n  }, [articleId]);\n\n  const generateMetaTags = () => {\n    if (article) {\n      return (\n        <Helmet>\n          <title>{article.title}</title>\n          <meta name=\"description\" content={article.description || 'No description provided'} />\n          <meta property=\"og:title\" content={article.title} />\n          <meta property=\"og:description\" content={article.description || 'No description provided'} />\n          <meta property=\"og:image\" content={article.imageUrl} />\n        </Helmet>\n      );\n    }\n    return null;\n  };\n\n  if (isLoading) {\n    return <div className=\"loading-container\">იტვირთება...</div>;\n  }\n\n  if (error || !article) {\n    return <div className=\"error-container\">{error || \"სტატია ვერ მოიძებნა\"}</div>;\n  }\n\n  return (\n    <div>\n      {generateMetaTags()}\n      <div>\n        <div\n          className=\"article-container\"\n          style={{\n            display: 'flex',\n            backgroundSize: 'cover',\n            backgroundPosition: 'center',\n            width: 'auto',\n            height: 'auto',\n          }}\n        >\n          <div\n            style={{\n              backdropFilter: 'blur(50px)',\n              marginTop: \"60px\",\n              textShadow: '2px 2px 5px black',\n              backgroundImage: 'linear-gradient(#131313, #0c0c0c)',\n              textAlign: 'center',\n              width: '100%'\n            }}\n          >\n            <h1>{article.title}</h1>\n            <p>ავტორი: {article.author}</p>\n            <img\n              src={article.imageUrl}\n              alt=\"\"\n              style={{\n                width: \"auto\",\n                height: isDesktopOrLaptop ? \"400px\" : \"250px\",\n                borderRadius: \"10px\",\n                boxShadow: \"0px 5px 15px rgba(0,0,0,0.5)\",\n                maxWidth: '90%'\n              }}\n            />\n            <div\n              className=\"fullText\"\n              style={{\n                maxWidth: isDesktopOrLaptop ? '900px' : '90%',\n                margin: '40px auto',\n                fontSize: isDesktopOrLaptop ? '21px' : '18px',\n                lineHeight: '1.6',\n                textAlign: 'left',\n                padding: '0 20px',\n                whiteSpace: 'pre-wrap' // Important for dynamic text layout\n              }}\n            >\n              {fullText}\n            </div>\n          </div>\n        </div>\n      </div>\n    </div>\n  );\n};\n\nexport default SingleArticlePage;\n"],"names":["SingleArticlePage","title","articleId","useParams","article","setArticle","useState","fullText","setFullText","isLoading","setIsLoading","error","setError","isDesktopOrLaptop","useMediaQuery","query","useEffect","async","staticArticle","articles","find","a","id","toString","response","fetch","ok","Error","text","dynamicArticle","databases","getDocument","author","imageUrl","description","err","console","loadArticle","_jsx","className","children","_jsxs","Helmet","name","content","property","style","display","backgroundSize","backgroundPosition","width","height","backdropFilter","marginTop","textShadow","backgroundImage","textAlign","src","alt","borderRadius","boxShadow","maxWidth","margin","fontSize","lineHeight","padding","whiteSpace"],"sourceRoot":""}